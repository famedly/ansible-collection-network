#jinja2: lstrip_blocks: "True", trim_blocks: "True"
entryPoints:
  web:
    address: ":80"
  web-secure:
    address: ":443"

{% if traefik_enable_api %}
api:
  dashboard: {{ traefik_enable_api_dashboard }}
  debug: {{ traefik_enable_api_debug }}
{% endif %}

{% if traefik_acme_enabled %}
certificatesResolvers:
  letsencrypt:
    acme:
      email: {{ traefik_acme_email }}
      {% if traefik_acme_challenge == 'HTTP-01'%}
      httpChallenge:
        entryPoint: web
      {% elif traefik_acme_challenge == 'DNS-01' %}
      dnsChallenge:
        provider: {{ traefik_acme_dns_provider }}
      {% elif traefik_acme_challenge == 'TLS-ALPN-01' %}
      tlsChallenge: {}
      {% endif %}
{% endif %}

providers:
  {% if traefik_enable_docker %}
  docker:
    exposedByDefault: false
  {% endif %}
  file:
    directory: /opt/traefik/config.d
    watch: true
